<app-navbar></app-navbar>

<div class="bg-green-200 to-green-200 text-black p-6">
  <h2 class="text-3xl font-bold mb-6">Administrar Escuelas</h2>

  <!-- Formulario para modificar -->
  <div *ngIf="editando" class="bg-green-300 p-6 mb-6 rounded shadow-lg">
      <h3 class="text-xl font-semibold mb-4">Editar Escuela</h3>
      <form (ngSubmit)="guardarEscuela()">
        <div class="mb-6">
          <label for="nombre" class="block text-sm font-medium">Nombre</label>
          <input
            id="nombre"
            [(ngModel)]="escuelaActual.Nombre"
            name="nombre"
            class="mt-2 block w-full border border-gray-300 rounded py-3 px-4 bg-green-50 text-black"
          />
        </div>
        <div class="mb-6">
          <label for="direccion" class="block text-sm font-medium">Dirección</label>
          <input
            id="direccion"
            [(ngModel)]="escuelaActual.Direccion"
            name="direccion"
            class="mt-2 block w-full border border-gray-300 rounded py-3 px-4 bg-green-50 text-black"
          />
        </div>
        <div class="mb-6">
          <label for="correo" class="block text-sm font-medium">Correo</label>
          <input
            id="correo"
            [(ngModel)]="escuelaActual.Correo"
            name="correo"
            class="mt-2 block w-full border border-gray-300 rounded py-3 px-4 bg-green-50 text-black"
          />
        </div>
        <div class="mb-6">
          <label for="telefono" class="block text-sm font-medium">Teléfono</label>
          <input
            id="telefono"
            [(ngModel)]="escuelaActual.Telefono"
            name="telefono"
            class="mt-2 block w-full border border-gray-300 rounded py-3 px-4 bg-green-50 text-black"
          />
        </div>
        <div class="mb-6">
          <label for="numeroEscuela" class="block text-sm font-medium">Número de Escuela</label>
          <input
            id="numeroEscuela"
            [(ngModel)]="escuelaActual.NumeroEscuela"
            name="numeroEscuela"
            class="mt-2 block w-full border border-gray-300 rounded py-3 px-4 bg-green-50 text-black"
          />
        </div>
        <div class="mb-6">
          <label for="metodoPago" class="block text-sm font-medium">Método de Pago</label>
          <select
            id="metodoPago"
            [(ngModel)]="escuelaActual.MetodoPago"
            name="metodoPago"
            class="mt-2 block w-full border border-gray-300 rounded py-3 px-4 bg-green-50 text-black"
          >
            <option value="Efectivo">Efectivo</option>
            <option value="Tarjeta">Tarjeta</option>
          </select>
        </div>
        <div class="mb-6">
          <label for="cantidadLicencias" class="block text-sm font-medium">Cantidad de Licencias</label>
          <input
            id="cantidadLicencias"
            [(ngModel)]="escuelaActual.CantidadLicencias"
            name="cantidadLicencias"
            type="number"
            class="mt-2 block w-full border border-gray-300 rounded py-3 px-4 bg-green-50 text-black"
          />
        </div>
        <div class="mb-6">
          <label for="fechaExpiracion" class="block text-sm font-medium">Fecha Expiración</label>
          <select
            id="fechaExpiracion"
            [(ngModel)]="escuelaActual.FechaExpiracion"
            name="fechaExpiracion"
            class="mt-2 block w-full border border-gray-300 rounded py-3 px-4 bg-green-50 text-black"
          >
            <option value="Mes">Mes</option>
            <option value="Año">Año</option>
            <option value="Vencido">Vencido</option>
          </select>
        </div>
        <div class="flex gap-4 justify-center">
          <button
            type="submit"
            class="bg-blue-600 text-white px-6 py-3 rounded hover:bg-blue-700"
          >
            Guardar
          </button>
        </div>
      </form>
    </div>
    
  <!-- Mostrar indicador de carga -->
  <div *ngIf="cargando" class="text-center text-gray-400">Cargando...</div>

  <!-- Mostrar error -->
  <div *ngIf="error" class="text-center text-red-600 font-semibold">{{ error }}</div>

  <!-- Tabla de escuelas -->
  <table
    *ngIf="!cargando && !error && escuelas.length > 0"
    class="table-auto w-full border-collapse border border-gray-300 text-black"
  >
    <thead class="bg-green-300">
      <tr>
        <th class="border border-gray-300 px-6 py-3">ID</th>
        <th class="border border-gray-300 px-6 py-3">Nombre</th>
        <th class="border border-gray-300 px-6 py-3">Dirección</th>
        <th class="border border-gray-300 px-6 py-3">Correo</th>
        <th class="border border-gray-300 px-6 py-3">Teléfono</th>
        <th class="border border-gray-300 px-6 py-3">Número Escuela</th>
        <th class="border border-gray-300 px-6 py-3">Método de Pago</th>
        <th class="border border-gray-300 px-6 py-3">Licencias</th>
        <th class="border border-gray-300 px-6 py-3">Fecha Expiración</th>
        <th class="border border-gray-300 px-6 py-3">Acciones</th>
      </tr>
    </thead>
    <tbody class="bg-green-100">
      <tr *ngFor="let escuela of escuelas" class="hover:bg-green-200">
        <td class="border border-gray-300 px-6 py-3">{{ escuela.IdEscuela }}</td>
        <td class="border border-gray-300 px-6 py-3">{{ escuela.Nombre }}</td>
        <td class="border border-gray-300 px-6 py-3">{{ escuela.Direccion }}</td>
        <td class="border border-gray-300 px-6 py-3">{{ escuela.Correo }}</td>
        <td class="border border-gray-300 px-6 py-3">{{ escuela.Telefono }}</td>
        <td class="border border-gray-300 px-6 py-3">{{ escuela.NumeroEscuela }}</td>
        <td class="border border-gray-300 px-6 py-3">{{ escuela.MetodoPago }}</td>
        <td class="border border-gray-300 px-6 py-3">{{ escuela.CantidadLicencias }}</td>
        <td class="border border-gray-300 px-6 py-3">{{ escuela.FechaExpiracion }}</td>
        <td class="border border-gray-300 px-6 py-3">
          <button
            class="bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600"
            (click)="editarEscuela(escuela)"
          >
            Editar
          </button>
          <button
            class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 ml-4"
            (click)="eliminarEscuela(escuela.IdEscuela)"
          >
            Eliminar
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Mensaje si no hay escuelas -->
  <div *ngIf="!cargando && escuelas.length === 0" class="text-center text-gray-400">
    No hay escuelas registradas.
  </div>
</div>
